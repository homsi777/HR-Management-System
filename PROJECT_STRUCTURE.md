# ุชูุซูู ูููู ุงููุดุฑูุน ููุงุนุฏุฉ ุงูุจูุงูุงุช (HR Management System)

ูููุฑ ูุฐุง ุงููุณุชูุฏ ูุฑุฌุนุงู ุดุงููุงู ููููููุฉ ุงููููุงุช ูุงููุฌูุฏุงุช ูู ุงููุดุฑูุนุ ุจุงูุฅุถุงูุฉ ุฅูู ุชูุงุตูู ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช (Database Schema).

---

## 1. ุงููููู ุงูุนุงู ูููุดุฑูุน (Project Structure)

### ุงููุฌูุฏุงุช ูุงููููุงุช ุงูุฌุฐุฑูุฉ (Root)

| ุงูููู / ุงููุฌูุฏ | ุงููุตู ูุงููููุฉ |
| :--- | :--- |
| **`main.js`** | **ููุทุฉ ุงูุฏุฎูู (Entry Point):** ููู ุงูุชุดุบูู ุงูุฑุฆูุณู ูุนูููุฉ Electron. ูููู ุจุฅูุดุงุก ุงููุงูุฐุฉุ ุชููุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ูุชุดุบูู ุงูุฎุฏูุงุช ุงูุฎูููุฉ (API, Push Service, Scanner). |
| **`preload.js`** | **ุฌุณุฑ ุงูุชูุงุตู (Bridge):** ูุฑุจุท ุจูู ูุงุฌูุฉ ุงููุณุชุฎุฏู (React) ูุงูุนูููุฉ ุงูุฑุฆูุณูุฉ (Electron) ุจุดูู ุขูู ุนุจุฑ `contextBridge`. ูุนุฑุถ ุงููุธุงุฆู ุงููุณููุญ ุจูุง ููุท ูููุงุฌูุฉ. |
| **`database.js`** | **ูุฏูุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช:** ูููุฆ ุงูุงุชุตุงู ุจููู `database.db`ุ ููุดุฆ ุงูุฌุฏุงูู (Migrations)ุ ููุตุฏุฑ ุฏูุงู ุงูุชุนุงูู ูุน ุงูุจูุงูุงุช (CRUD) ูุจุงูู ุงูุชุทุจูู. |
| **`activationCodes.js`** | **ุฃููุงุฏ ุงูุชูุนูู:** ูุญุชูู ุนูู ูุงุฆูุฉ ูุตูููุฉ ุจุฑููุฒ ุงูุชูุนูู ุงูููุจููุฉ ูููุณุฎุฉ ุงููุฏููุนุฉ. |
| **`App.tsx`** | **ุงูุญุงููุฉ ุงูุฑุฆูุณูุฉ ูููุงุฌูุฉ:** ุงููููู ุงูุฃู ูู React. ูุฏูุฑ ุงูุชูุฌูู (Routing)ุ ุชุญููู ุงูุจูุงูุงุช ุงูุฃูููุ ูุญุงูุฉ ุชุณุฌูู ุงูุฏุฎูู. |
| **`index.tsx`** | **ููุทุฉ ุชุตููุฑ React:** ูุฑุจุท ุชุทุจูู React ุจุตูุญุฉ HTML. |
| **`types.ts`** | **ุชุนุฑููุงุช ุงูุฃููุงุน (TypeScript):** ูุญุชูู ุนูู Interfaces ู Types ูุถูุงู ุชุทุงุจู ุงูุจูุงูุงุช ูู ูุงูู ุงููุดุฑูุน (ูุซู `Employee`, `User`, `AttendanceRecord`). |
| **`constants.ts`** | **ุงูุซูุงุจุช:** ูุญุชูู ุนูู ุงูุฃููููุงุช (SVG Icons) ูุงูููู ุงูุซุงุจุชุฉ ุงููุณุชุฎุฏูุฉ ูู ุงููุงุฌูุฉ. |
| `package.json` | ุฅุนุฏุงุฏุงุช ุงููุดุฑูุนุ ุงูุณูุฑุจุชุงุชุ ููุงุฆูุฉ ุงูููุชุจุงุช ุงููุณุชุฎุฏูุฉ. |
| `vite.config.js` | ุฅุนุฏุงุฏุงุช ุงููุชุฑุฌู Vite (ูุจูุงุก ูุงุฌูุฉ React). |
| `tailwind.config.js` | ุฅุนุฏุงุฏุงุช ุชูุณููุงุช Tailwind CSS. |

---

### 2. ูุฌูุฏุงุช ุงูููุทู ุงูุฎููู (Backend Logic)

ุชู ุชูุณูู ุงูููุทู ุงูุฎููู ูุชุณููู ุงูุตูุงูุฉ:

#### ๐ `database_logic/` (ููุทู ูุงุนุฏุฉ ุงูุจูุงูุงุช)
ูุญุชูู ุนูู ุงูุฏูุงู ุงูุชู ุชููุฐ ุงุณุชุนูุงูุงุช SQL ูุนูุฏุฉ.

| ุงูููู | ุงููููุฉ |
| :--- | :--- |
| `auth.js` | ูุนุงูุฌุฉ ุชุณุฌูู ุงูุฏุฎูู ูุงูุชุญูู ูู ูููุฉ ุงููุฑูุฑ (Bcrypt). |
| `employee.js` | ุฅุฏุงุฑุฉ ุงูููุธูููุ ูุญุฐู ุงูุจูุงูุงุช ุงููุฑุชุจุทุฉ (Cascade Delete) ุนูุฏ ุญุฐู ููุธู. |
| `attendance.js` | ูุนุงูุฌุฉ ุณุฌูุงุช ุงูุญุถูุฑ ุงูุฎุงูุ ูุฑุจุท ุงูุจุตูุงุช ุบูุฑ ุงููุนุฑูุฉ ุจุงูููุธููู. |
| `payroll.js` | **ูุญุฑู ุงูุฑูุงุชุจ:** ุญุณุงุจ ุงูุฑูุงุชุจุ ุงูุฅุถุงููุ ุงูุฎุตููุงุชุ ูุงูุณูู ุจูุงุกู ุนูู ุงูุชูุงุฑูุฎ. |
| `visitor.js` | ุฅุฏุงุฑุฉ ุทุงุจูุฑ ุงูุฒูุงุฑ ูุญุฌุฒ ุงูุฃุฏูุงุฑ. |
| `utils.js` | ุฏูุงู ูุณุงุนุฏุฉ ูุชุญููู ุงูุจูุงูุงุช (ูุซู JSON Parsing) ุนูุฏ ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ ูู ุงููุงุนุฏุฉ. |

#### ๐ `main_services/` (ุงูุฎุฏูุงุช ุงูุฎูููุฉ)
ุฎุฏูุงุช ุชุนูู ุจุดูู ูุณุชูู ูู ุงูุฎูููุฉ.

| ุงูููู | ุงููููุฉ |
| :--- | :--- |
| `apiServer.js` | ุฎุงุฏู HTTP ูุญูู (Port 3001) ูุงุณุชูุจุงู ุจูุงูุงุช ุงูุจุตูุฉ ุนุจุฑ ุงูุดุจูุฉ. |
| `smsService.js` | ุฅุฏุงุฑุฉ ุทุงุจูุฑ ุงูุฑุณุงุฆู ุงููุตูุฑุฉ (SMS Queue) ูุงูุชูุงุตู ูุน ุงูููุฏู. |
| `scannerService.js` | ุงูุงุณุชูุงุน ููููุฐ COM ููุฑุงุกุฉ ุจูุงูุงุช ุงููููุฉ ูู ุงููุงุณุญ ุงูุถูุฆู. |
| `fileImportService.js` | ูุฑุงูุจุฉ ูุฌูุฏ ุงููุณุชูุฏุงุช ูุงุณุชูุฑุงุฏ ูููุงุช ุงูุฅูุณู ุชููุงุฆูุงู. |

#### ๐ `ipc_handlers/` (ูุนุงูุฌุงุช ุงูุงุชุตุงู IPC)
ุงุณุชูุจุงู ุงูุฃูุงูุฑ ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุชูููุฐูุง.

| ุงูููู | ุงููููุฉ |
| :--- | :--- |
| `index.js` | ุงููุฌูุน ุงูุฑุฆูุณู ุงูุฐู ูุณุฌู ุฌููุน ุงููุนุงูุฌุงุช. |
| `dbHandlers.js` | ุฃูุงูุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุนุงูุฉ (Get, Insert, Update, Delete, Export/Import). |
| `deviceHandlers.js` | ุฃูุงูุฑ ุฃุฌูุฒุฉ ุงูุจุตูุฉ (ุงุชุตุงูุ ูุฒุงููุฉุ ุฑูุน ูุณุชุฎุฏููู). |
| `payrollHandlers.js` | ุฃูุงูุฑ ุชุณููู ุงูุฑูุงุชุจ ูุญุณุงุจูุง. |
| `smsHandlers.js` | ุฃูุงูุฑ ุฅุฑุณุงู ุงูุฑุณุงุฆู ูุฌูุจ ุงูุณุฌู. |
| `scannerHandlers.js` | ุฃูุงูุฑ ุงูุชุญูู ุจุงููุงุณุญ ุงูุถูุฆู. |

#### ๐ `services/` (ุฎุฏูุงุช ุฅุถุงููุฉ)
| ุงูููู | ุงููููุฉ |
| :--- | :--- |
| `pushService.js` | ุฎุงุฏู TCP (Port 5005) ูุงุณุชูุจุงู ุจูุงูุงุช ุงูุจุตูุฉ ุงูููุฑูุฉ (Real-time Push). |
| `zkNodeService.js` | ุงูุชุนุงูู ุงููุจุงุดุฑ ูุน ุจุฑูุชูููู ุฃุฌูุฒุฉ ZKTeco (UDP/TCP). |

---

### 3. ูุฌูุฏุงุช ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Frontend Components)

ููุฌูุฏุฉ ุฏุงุฎู `components/`:

#### ุงูููููุงุช ุงูุฑุฆูุณูุฉ (ุงูุตูุญุงุช)
| ุงููููู | ุงูุตูุญุฉ ุงูููุงุจูุฉ |
| :--- | :--- |
| `Dashboard.tsx` | ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ ูุงูุฅุญุตุงุฆูุงุช. |
| `Employees.tsx` | ุฅุฏุงุฑุฉ ูููุงุช ุงูููุธููู (ุฅุถุงูุฉุ ุชุนุฏููุ ุฅููุงุก ุฎุฏูุฉ). |
| `Attendance.tsx` | ุณุฌูุงุช ุงูุญุถูุฑ ูุงูุงูุตุฑุงู (ุนุฑุถ ูุชุนุฏูู ูุฏูู). |
| `Payroll.tsx` | ูุดู ุงูุฑูุงุชุจุ ุงูุญุณุงุจุงุชุ ูุฅุตุฏุงุฑ ุงูุฅูุตุงูุงุช. |
| `Leaves.tsx` | ุฅุฏุงุฑุฉ ุทูุจุงุช ุงูุฅุฌุงุฒุงุช ูุงูููุงููุงุช. |
| `Reports.tsx` | **ูููุฏ ุงูุชูุงุฑูุฑ:** ูุญุชูู ุนูู ุงูููุทู ุงูุญุณุงุจู ูุฅูุดุงุก ุจูุงูุงุช ุงูุชูุงุฑูุฑ ุงููุฎุชููุฉ ูุชุตุฏูุฑูุง. |
| `Settings.tsx` | ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉุ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏูููุ ูุงูุฃุฌูุฒุฉ. |
| `Clients.tsx` | ุฅุฏุงุฑุฉ ุงูุนููุงุก ูุงูููุงู (CRM ูุตุบุฑ). |
| `Recruitment.tsx` | ูุธุงู ุงูุชูุธูู ูุงูููุงุจูุงุช ูุชุญููู ุงููุชูุฏููู ูููุธููู. |

#### ๐ `components/reports/` (ููุงูุจ ุงูุชูุงุฑูุฑ)
| ุงููููู | ุงููุตู |
| :--- | :--- |
| `DetailedHoursReport.tsx` | ูุนุฑุถ ุฌุฏูู ุชูุตููู ูุณุงุนุงุช ุงูุนูู (ููุฑุฑ vs ูุนูู vs ุฅุถุงูู) ููู ููู. |
| `PayrollReport.tsx` | ุฌุฏูู ูุดู ุงูุฑูุงุชุจ. |
| `AttendanceSummaryReport.tsx` | ููุฎุต ุฃูุงู ุงูุญุถูุฑ ูุงูุบูุงุจ. |
| `EmployeeProfileReport.tsx` | ุจุฑููุงูู ุดุงูู ููููุธู. |
| ... ูุบูุฑูุง | (Deductions, Bonuses, Maintenance, etc.) |

#### ๐ `components/ui/` (ุนูุงุตุฑ ูุงุฌูุฉ ุนุงูุฉ)
`Modal.tsx` (ููุงูุฐ ููุจุซูุฉ), `Card.tsx` (ุจุทุงูุงุช ุฅุญุตุงุฆูุฉ), `Toast.tsx` (ุฅุดุนุงุฑุงุช), `NotificationBell.tsx`.

---

## 4. ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช (Database Schema)

ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุณุชุฎุฏูุฉ ูู **SQLite**. ูููุง ููู ุชูุตูู ููุฌุฏุงูู ุงูุฑุฆูุณูุฉ:

### 1. ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ (Core HR)

*   **`employees` (ุงูููุธููู):**
    *   `id`: ุงููุนุฑู ุงููุฑูุฏ.
    *   `name`, `phone`, `email`, `address`, `nationalId`: ุจูุงูุงุช ุดุฎุตูุฉ.
    *   `salaryCurrency`, `monthlySalary`, `hourlyRate`, `overtimeRate`: ุงูุจูุงูุงุช ุงููุงููุฉ.
    *   `agreedDailyHours`: ุนุฏุฏ ุณุงุนุงุช ุงูุนูู ุงูููุฑุฑุฉ ููููุงู (ูุงู ูุญุณุงุจ ุงูุฅุถุงูู/ุงูููุต).
    *   `biometricId`: ุงูุฑูู ุงููุนุฑู ุนูู ุฌูุงุฒ ุงูุจุตูุฉ.
    *   `departmentId`, `branchId`, `jobTitleId`: ููุงุชูุญ ุฃุฌูุจูุฉ.
    *   `workdays`: ูุตูููุฉ JSON ูุฃูุงู ุงูุนูู (0=ุงูุฃุญุฏุ 1=ุงูุงุซููู...).

*   **`attendance` (ุงูุญุถูุฑ):**
    *   `employeeId`: ุฑุจุท ุจุงูููุธู.
    *   `date`: ุงูุชุงุฑูุฎ (YYYY-MM-DD).
    *   `checkIn`: ููุช ุงูุฏุฎูู (HH:MM).
    *   `checkOut`: ููุช ุงูุฎุฑูุฌ (HH:MM).
    *   `isPaid`: ุญุงูุฉ ุงูุฏูุน (ูู ุชู ุตุฑู ุฑุงุชุจ ูุฐู ุงููุชุฑุฉุ).

*   **`leaveRequests` (ุงูุฅุฌุงุฒุงุช):**
    *   `type`: ููุน ุงูุฅุฌุงุฒุฉ (ุณูููุฉุ ูุฑุถูุฉ...).
    *   `startDate`, `endDate`.
    *   `status`: (Pending, Approved, Rejected).
    *   `deductFromSalary`: ูู ุชุฎุตู ูู ุงูุฑุงุชุจุ

### 2. ุงูุฑูุงุชุจ ูุงูุญุณุงุจุงุช (Payroll)

*   **`payments` (ุณุฌู ุงูุฏูุนุงุช):**
    *   ูุฎุฒู ุฃุฑุดูู ุงูุฑูุงุชุจ ุงูุชู ุชู ุชุณููููุง ูุนููุงู.
    *   `grossAmount`: ุงููุจูุบ ุงููุณุชุญู.
    *   `netAmount`: ุงูุตุงูู ุจุนุฏ ุงูุฎุตู.
    *   `advancesDeducted`: ุงูุณูู ุงููุฎุตููุฉ.

*   **`salaryAdvances` (ุงูุณูู):**
    *   `amount`, `date`, `status` (Pending, Approved, Paid).

*   **`bonuses` / `deductions`:**
    *   ุฌุฏุงูู ููููุงูุขุช ูุงูุฎุตููุงุช ุงููุงููุฉ ุงููุชูุฑูุฉ.

### 3. ุงููููู ุงูุฅุฏุงุฑู ูุงูุฅุนุฏุงุฏุงุช

*   **`branches` (ุงููุฑูุน)**
*   **`departments` (ุงูุฃูุณุงู)**
*   **`jobTitles` (ุงููุณููุงุช ุงููุธูููุฉ)**
*   **`users`:** ูุณุชุฎุฏูู ุงููุธุงู ูุตูุงุญูุงุชูู.
*   **`settings`:** ุฌุฏูู "Key-Value" ูุชุฎุฒูู ุฅุนุฏุงุฏุงุช ุงููุธุงู (ูุซู ุฃูุงู ุงูุนููุ ุงูููุงูุจุ ุงูุชูุนูู).
*   **`devices`:** ุฅุนุฏุงุฏุงุช ุฃุฌูุฒุฉ ุงูุจุตูุฉ (IP, Port).

### 4. ูุญุฏุงุช ุฅุถุงููุฉ

*   **`sms_log`:** ุณุฌู ุงูุฑุณุงุฆู ุงููุฑุณูุฉ ูุญุงูุชูุง.
*   **`jobApplications`:** ุทูุจุงุช ุงูุชูุธููุ ุงูููุงุจูุงุชุ ูุงููุฑููุงุช.
*   **`custody`:** ุณุฌู ุนูุฏ ุงูููุธููู (ุฃุฌูุฒุฉุ ููุงุชูุญุ ุงูุฎ).
*   **`clients`, `client_tasks`:** ุฌุฏุงูู ุงูุนููุงุก ูููุงู ุงููุชุงุจุนุฉ.
*   **`visitor_queue`:** ุณุฌู ุฃุฏูุงุฑ ุงูุฒูุงุฑ ุงููููู.
